{
	"info": {
		"_postman_id": "airbnb-clone-api-2024",
		"name": "Airbnb Clone API",
		"description": "Complete API collection for testing Airbnb Clone backend endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "property_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "booking_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "payment_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "review_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "message_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.access) {",
									"        pm.collectionVariables.set('access_token', jsonData.access);",
									"    }",
									"    if (jsonData.refresh) {",
									"        pm.collectionVariables.set('refresh_token', jsonData.refresh);",
									"    }",
									"    if (jsonData.user && jsonData.user.user_id) {",
									"        pm.collectionVariables.set('user_id', jsonData.user.user_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"SecurePassword123!\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone_number\": \"+1234567890\",\n    \"role\": \"guest\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/register/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "register", ""]
						},
						"description": "Register a new user account"
					}
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.access) {",
									"        pm.collectionVariables.set('access_token', jsonData.access);",
									"    }",
									"    if (jsonData.refresh) {",
									"        pm.collectionVariables.set('refresh_token', jsonData.refresh);",
									"    }",
									"    if (jsonData.user && jsonData.user.user_id) {",
									"        pm.collectionVariables.set('user_id', jsonData.user.user_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"SecurePassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/login/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "login", ""]
						},
						"description": "Login with email and password"
					}
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.access) {",
									"        pm.collectionVariables.set('access_token', jsonData.access);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/token/refresh/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "token", "refresh", ""]
						},
						"description": "Refresh access token using refresh token"
					}
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get User Profile",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/profile/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "profile", ""]
						},
						"description": "Get current user's profile"
					}
				},
				{
					"name": "Update User Profile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe Updated\",\n    \"phone_number\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/profile/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "profile", ""]
						},
						"description": "Update current user's profile"
					}
				},
				{
					"name": "Get User Detail",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/{{user_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{user_id}}", ""]
						},
						"description": "Get specific user details by ID"
					}
				}
			]
		},
		{
			"name": "Properties",
			"item": [
				{
					"name": "List All Properties",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/properties/?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", ""],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "location",
									"value": "New York",
									"disabled": true
								},
								{
									"key": "min_price",
									"value": "50",
									"disabled": true
								},
								{
									"key": "max_price",
									"value": "200",
									"disabled": true
								},
								{
									"key": "bedrooms",
									"value": "2",
									"disabled": true
								}
							]
						},
						"description": "Get list of all properties with optional filters"
					}
				},
				{
					"name": "Create Property",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.property_id) {",
									"        pm.collectionVariables.set('property_id', jsonData.property_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Beautiful Beach House\",\n    \"description\": \"A stunning beach house with ocean views\",\n    \"location\": \"Miami, Florida\",\n    \"pricepernight\": \"250.00\",\n    \"bedrooms\": 3,\n    \"bathrooms\": 2,\n    \"max_guests\": 6,\n    \"amenities\": \"WiFi, Pool, Kitchen, AC, Parking\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/properties/create/",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", "create", ""]
						},
						"description": "Create a new property listing (requires host role)"
					}
				},
				{
					"name": "Get Property Detail",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/properties/{{property_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", "{{property_id}}", ""]
						},
						"description": "Get detailed information about a specific property"
					}
				},
				{
					"name": "Update Property",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Beautiful Beach House Updated\",\n    \"description\": \"A stunning beach house with ocean views and renovated kitchen\",\n    \"pricepernight\": \"275.00\",\n    \"amenities\": \"WiFi, Pool, Kitchen, AC, Parking, Beach Access\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/properties/{{property_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", "{{property_id}}", ""]
						},
						"description": "Update property details (only property owner)"
					}
				},
				{
					"name": "Delete Property",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/properties/{{property_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", "{{property_id}}", ""]
						},
						"description": "Delete a property (only property owner)"
					}
				},
				{
					"name": "Get My Properties",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/properties/my-properties/",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", "my-properties", ""]
						},
						"description": "Get all properties owned by current user"
					}
				},
				{
					"name": "Upload Property Images",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "image",
									"type": "file",
									"src": []
								},
								{
									"key": "is_primary",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/properties/{{property_id}}/images/",
							"host": ["{{base_url}}"],
							"path": ["api", "properties", "{{property_id}}", "images", ""]
						},
						"description": "Upload images for a property"
					}
				}
			]
		},
		{
			"name": "Bookings",
			"item": [
				{
					"name": "List My Bookings",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bookings/",
							"host": ["{{base_url}}"],
							"path": ["api", "bookings", ""]
						},
						"description": "Get all bookings made by current user"
					}
				},
				{
					"name": "Create Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.booking_id) {",
									"        pm.collectionVariables.set('booking_id', jsonData.booking_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"property_id\": \"{{property_id}}\",\n    \"start_date\": \"2024-12-15\",\n    \"end_date\": \"2024-12-20\",\n    \"num_guests\": 4\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/bookings/create/",
							"host": ["{{base_url}}"],
							"path": ["api", "bookings", "create", ""]
						},
						"description": "Create a new booking for a property"
					}
				},
				{
					"name": "Get Booking Detail",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bookings/{{booking_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "bookings", "{{booking_id}}", ""]
						},
						"description": "Get details of a specific booking"
					}
				},
				{
					"name": "Update Booking",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"start_date\": \"2024-12-16\",\n    \"end_date\": \"2024-12-21\",\n    \"num_guests\": 5\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/bookings/{{booking_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "bookings", "{{booking_id}}", ""]
						},
						"description": "Update booking details"
					}
				},
				{
					"name": "Cancel Booking",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bookings/{{booking_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "bookings", "{{booking_id}}", ""]
						},
						"description": "Cancel a booking"
					}
				},
				{
					"name": "Host - Get My Property Bookings",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bookings/host/",
							"host": ["{{base_url}}"],
							"path": ["api", "bookings", "host", ""]
						},
						"description": "Get all bookings for properties owned by current user (host)"
					}
				}
			]
		},
		{
			"name": "Payments",
			"item": [
				{
					"name": "List Payments",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payments/",
							"host": ["{{base_url}}"],
							"path": ["api", "payments", ""]
						},
						"description": "Get all payments for current user"
					}
				},
				{
					"name": "Create Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.payment_id) {",
									"        pm.collectionVariables.set('payment_id', jsonData.payment_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"booking_id\": \"{{booking_id}}\",\n    \"amount\": \"1250.00\",\n    \"payment_method\": \"stripe\",\n    \"stripe_token\": \"tok_visa\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/payments/create/",
							"host": ["{{base_url}}"],
							"path": ["api", "payments", "create", ""]
						},
						"description": "Create a payment for a booking using Stripe"
					}
				},
				{
					"name": "Get Payment Detail",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payments/{{payment_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "payments", "{{payment_id}}", ""]
						},
						"description": "Get details of a specific payment"
					}
				}
			]
		},
		{
			"name": "Reviews",
			"item": [
				{
					"name": "Get Property Reviews",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reviews/property/{{property_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "reviews", "property", "{{property_id}}", ""]
						},
						"description": "Get all reviews for a specific property"
					}
				},
				{
					"name": "Create Review",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.review_id) {",
									"        pm.collectionVariables.set('review_id', jsonData.review_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"property_id\": \"{{property_id}}\",\n    \"booking_id\": \"{{booking_id}}\",\n    \"rating\": 5,\n    \"comment\": \"Amazing property! The location was perfect and the host was very responsive. Highly recommend!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reviews/create/",
							"host": ["{{base_url}}"],
							"path": ["api", "reviews", "create", ""]
						},
						"description": "Create a review for a property (requires completed booking)"
					}
				},
				{
					"name": "Get Review Detail",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reviews/{{review_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "reviews", "{{review_id}}", ""]
						},
						"description": "Get details of a specific review"
					}
				},
				{
					"name": "Update Review",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"rating\": 4,\n    \"comment\": \"Great property! Minor issue with WiFi but overall excellent stay.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reviews/{{review_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "reviews", "{{review_id}}", ""]
						},
						"description": "Update a review (only by review author)"
					}
				},
				{
					"name": "Delete Review",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reviews/{{review_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "reviews", "{{review_id}}", ""]
						},
						"description": "Delete a review (only by review author)"
					}
				}
			]
		},
		{
			"name": "Messages",
			"item": [
				{
					"name": "List My Messages",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/messages/",
							"host": ["{{base_url}}"],
							"path": ["api", "messages", ""]
						},
						"description": "Get all messages for current user"
					}
				},
				{
					"name": "Create Message",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.message_id) {",
									"        pm.collectionVariables.set('message_id', jsonData.message_id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"recipient_id\": \"{{user_id}}\",\n    \"message_body\": \"Hi! I'm interested in booking your property. Is it available for the dates I mentioned?\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messages/create/",
							"host": ["{{base_url}}"],
							"path": ["api", "messages", "create", ""]
						},
						"description": "Send a message to another user"
					}
				},
				{
					"name": "Get Conversation",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/messages/conversation/{{user_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "messages", "conversation", "{{user_id}}", ""]
						},
						"description": "Get conversation thread with a specific user"
					}
				},
				{
					"name": "Get Message Detail",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/messages/{{message_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "messages", "{{message_id}}", ""]
						},
						"description": "Get details of a specific message"
					}
				}
			]
		},
		{
			"name": "OAuth",
			"item": [
				{
					"name": "Google Login",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/auth/google/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "auth", "google", ""]
						},
						"description": "Redirect to Google OAuth login (use in browser)"
					}
				},
				{
					"name": "Facebook Login",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/auth/facebook/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "auth", "facebook", ""]
						},
						"description": "Redirect to Facebook OAuth login (use in browser)"
					}
				}
			]
		},
		{
			"name": "API Documentation",
			"item": [
				{
					"name": "Swagger UI",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/swagger/",
							"host": ["{{base_url}}"],
							"path": ["swagger", ""]
						},
						"description": "Interactive API documentation with Swagger UI"
					}
				},
				{
					"name": "ReDoc",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/redoc/",
							"host": ["{{base_url}}"],
							"path": ["redoc", ""]
						},
						"description": "Alternative API documentation with ReDoc"
					}
				}
			]
		}
	]
}
